<!doctype html><html lang=ko><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XD9VVSGMKV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XD9VVSGMKV",{anonymize_ip:!1})}</script><title>Nullable Receiver in Extension Functions of Kotlin ::
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The receiver object in extension functions allows null values because it is actually a parameter. At first glance, anObject.method() and anObject.extensionFunction() may look similar, but this is not the case. If anObject is null, the method() will never be called, but the extensionFunction() can still be called. Here is an example:
fun String?.extensionFunction() = this?.length fun main() { val str: String? = null println(str.extensionFunction()) // prints &amp;#39;null&amp;#39; } In this example, when using this inside an extension function, note that the safe call operator should be used."><meta name=keywords content="개발 블로그,개발블로그"><meta name=robots content="noodp"><link rel=canonical href=https://disj11.github.io/en/nullable-receiver-in-extension-functions-of-kotlin/><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://disj11.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://disj11.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://disj11.github.io/img/favicon.png><link href=/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Nullable Receiver in Extension Functions of Kotlin"><meta name=twitter:description content="The receiver object in extension functions allows null value."><meta property="og:title" content="Nullable Receiver in Extension Functions of Kotlin"><meta property="og:description" content="The receiver object in extension functions allows null value."><meta property="og:type" content="article"><meta property="og:url" content="https://disj11.github.io/en/nullable-receiver-in-extension-functions-of-kotlin/"><meta property="article:section" content="en"><meta property="article:published_time" content="2023-01-08T21:22:27+09:00"><meta property="article:modified_time" content="2023-01-08T21:22:27+09:00"><meta property="og:site_name" content="Life Log"><script src=https://cdn.jsdelivr.net/npm/algoliasearch@4.14.2/dist/algoliasearch-lite.umd.js integrity="sha256-dImjLPUsG/6p3+i7gVKBiDM8EemJAhQ0VvkRK2pVsQY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@algolia/autocomplete-js></script><script>function initAutoComplete(){const e=document.createElement("div");e.id="autocomplete";const t=document.createElement("li");t.appendChild(e),document.querySelector("nav.menu > ul")?.prepend(t)}window.onload=()=>{initAutoComplete();const e=algoliasearch("XKH7GYIHTP","aae1864001169a9e40ae7a0f1e802d67"),{autocomplete:t,getAlgoliaResults:n}=window["@algolia/autocomplete-js"];t({container:"#autocomplete",placeholder:"Search for posts",getSources({query:t}){return[{sourceId:"posts",getItems(){return n({searchClient:e,queries:[{indexName:"disj11.github.io",query:t,params:{hitsPerPage:5,attributesToSnippet:["title:10","content:35"],snippetEllipsisText:"…"}}]})},templates:{header({html:e}){return e`
                                    <span class="aa-SourceHeaderTitle">Posts</span>
                                    <div class="aa-SourceHeaderLine"/>
                                `},item({item:e,components:n,html:s}){return s`
                                    <a class="aa-ItemLink" href="${e.href}?search=${t}">
                                        <div class="aa-ItemContent">
                                            <div class="aa-ItemContentBody">
                                                <div class="aa-ItemContentTitle">
                                                    ${n.Highlight({hit:e,attribute:"title"})}
                                                </div>
                                                <div class="aa-ItemContentDescription">
                                                    ${n.Snippet({hit:e,attribute:"content"})}
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                `},noResults(){return"No posts for this query."}}}]}})}</script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>Life Log</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/notes>Notes</a></li><li><a href=/tags>Tags</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/notes>Notes</a></li><li><a href=/tags>Tags</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><article class=post><h1 class=post-title>Nullable Receiver in Extension Functions of Kotlin</h1><div class=post-meta><time class=post-date>2023-01-08</time></div><span class=post-tags><a href=https://disj11.github.io/tags/kotlin/>#kotlin</a>&nbsp;</span><div class=post-content><p>The receiver object in extension functions allows null values because it is actually a parameter. At first glance, <code>anObject.method()</code> and <code>anObject.extensionFunction()</code> may look similar, but this is not the case. If <code>anObject</code> is null, the <code>method()</code> will never be called, but the <code>extensionFunction()</code> can still be called. Here is an example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>String</span><span style=color:#f92672>?.</span>extensionFunction() = <span style=color:#66d9ef>this</span><span style=color:#f92672>?.</span>length
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> str: String? = <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>    println(str.extensionFunction()) <span style=color:#75715e>// prints &#39;null&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>In this example, when using <code>this</code> inside an extension function, note that the safe call operator should be used.<br>This code has a disadvantage: it may return <code>null</code>. In these cases, we should write code like the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>val</span> str: String = <span style=color:#e6db74>&#34;Some text&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> length = str.extensionFunction() <span style=color:#f92672>?:</span> error(<span style=color:#e6db74>&#34;Should never happen&#34;</span>)
</span></span></code></pre></div><p>If the surrounding code changes, it could cause a bug to occur.
To avoid these problems, if you use a nullable receiver inside an extension function, it is best not to return <code>null</code>.
If you need an extension function that returns <code>null</code>, you can define it as an extension of a non-nullable type and use the safe call operator when calling the extension, as shown in the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>String</span>.extensionFunction(): Int? {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> length = str<span style=color:#f92672>?.</span>extensionFunction()
</span></span></code></pre></div><p>If you have any questions about the extensions, you can find more information <a href=https://kotlinlang.org/docs/extensions.html>here</a>.</p></div></article></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>Life Log</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2024 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>