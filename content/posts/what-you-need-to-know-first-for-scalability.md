---
title: "확장성과 성능 최적화: 시스템 부하와 효율적인 대처 전략"
description: "확장성이란 무엇인지부터 부하 매개변수와 성능 지표의 중요성, 그리고 꼬리 지연 시간과 효율적 자원 활용 전략까지, 시스템 확장성을 체계적으로 이해하고 최적화하는 방법을 알아봅니다."
date: 2023-02-05T12:15:15+09:00
lastmod: 2024-12-29T11:33:00+09:00
tags: [development]
---

## 확장성

**확장성**은 시스템이 증가하는 부하에 효과적으로 대처할 수 있는 능력을 설명하는 데 사용되는 용어입니다. 하지만 "X는 확장 가능하다" 또는 "Y는 확장성이 없다"라는 표현은 구체적인 의미를 전달하기 어렵습니다. 확장성을 논의한다는 것은 **"시스템이 커진다면 이에 대처하기 위한 선택은 무엇인가?"** 그리고 **"추가 부하를 처리하기 위해 자원을 어떻게 투입할 것인가?"** 와 같은 구체적인 질문을 고려한다는 뜻입니다.

확장성을 평가하려면 시스템이 증가하는 부하에 어떻게 반응하는지, 이를 해결하기 위해 어떤 전략을 사용할 수 있는지를 명확히 이해해야 합니다. 특히, 수직적 확장(scale-up)과 수평적 확장(scale-out)의 차이를 이해하는 것이 중요합니다.

- **수직적 확장(scale-up):** 기존 시스템의 성능을 높이기 위해 더 강력한 하드웨어를 추가하거나 업그레이드하는 방식입니다. 예를 들어, 더 빠른 CPU나 더 많은 메모리를 추가하는 것이 이에 해당합니다.
- **수평적 확장(scale-out):** 여러 대의 시스템을 추가하여 부하를 분산시키는 방식입니다. 예를 들어, 웹 서버를 여러 대로 늘리고 로드 밸런서를 통해 트래픽을 분산시키는 방법이 있습니다.

각 방법에는 장단점이 있으며, 상황에 따라 적합한 전략을 선택해야 합니다.

## 부하 기술하기

확장성을 논의하려면 현재 시스템의 부하를 간결하고 명확하게 기술해야 합니다. 이를 통해 **"부하가 두 배로 증가하면 어떤 일이 발생할까?"** 와 같은 시나리오를 분석할 수 있습니다.

부하는 **부하 매개변수(load parameter)** 라는 몇 가지 숫자로 표현됩니다. 시스템마다 적합한 부하 매개변수는 다르지만, 일반적으로 다음과 같은 항목들이 포함됩니다:

- 웹 서버의 초당 요청 수
- 데이터베이스의 읽기 대 쓰기 비율
- 동시 활성 사용자(active user) 수
- 캐시 적중률(cache hit rate)

이러한 매개변수는 평균적인 상황을 나타낼 수도 있지만, 때로는 극단적인 경우(예: 피크 타임, 병목 현상)가 시스템 성능에 더 큰 영향을 미칠 수 있습니다. 따라서 평균뿐만 아니라 극단적인 상황도 함께 고려해야 합니다.

예를 들어, 대규모 전자상거래 플랫폼에서는 초당 요청 수와 동시 활성 사용자가 중요한 부하 매개변수가 될 수 있습니다. 반면, 스트리밍 서비스에서는 캐시 적중률과 네트워크 대역폭 사용량이 주요 지표가 될 것입니다.

## 성능 기술하기

부하를 정의한 후에는 부하가 증가했을 때 시스템 성능이 어떻게 변화하는지 조사할 필요가 있습니다. 이를 위해 다음과 같은 질문을 던질 수 있습니다:

- **부하 매개변수를 증가시키고 자원(CPU, 메모리, 네트워크 대역폭)은 그대로 유지하면 성능에 어떤 영향을 미칠까요?**
- **부하 매개변수를 증가시키면서 성능을 유지하려면 자원을 얼마나 추가해야 할까요?**

이 질문들에 답하려면 시스템 성능을 측정하고 평가할 수 있는 지표가 필요합니다.

### 주요 성능 지표

1. **일괄 처리 시스템(batch processing system):**
    - 주로 **처리량(throughput)** 에 관심을 둡니다.
    - 예: 초당 처리 가능한 레코드 수 또는 일정 크기의 데이터 집합을 처리하는 데 걸리는 시간.

2. **온라인 시스템(online system):**
    - 주로 **응답 시간(response time)** 에 관심을 둡니다.
    - 응답 시간은 클라이언트가 요청을 보내고 응답을 받기까지 걸리는 시간으로 정의됩니다.

응답 시간은 고정된 값이 아니라 요청마다 변동될 수 있으므로, 단일 숫자가 아닌 **분포(distribution)** 로 이해해야 합니다.

### 응답 시간 분석

평균 응답 시간은 전체적인 경향을 파악하기에는 유용하지만, 실제 사용자 경험을 정확히 반영하지 못할 수 있습니다. 이는 평균값이 극단적인 값(특이 값, outlier)에 의해 왜곡될 가능성이 있기 때문입니다. 따라서 평균 대신 **백분위(percentile)** 를 사용하는 것이 더 적합합니다.

- **중앙값(median):** 응답 시간을 빠른 순서대로 정렬했을 때 중간값으로, 50%의 요청이 이 시간 이하로 처리됨을 의미합니다.
- **상위 백분위:** 95분위(p95), 99분위(p99), 99.9분위(p999) 등이 자주 사용됩니다.
    - 예: 95분위 응답 시간이 1.5초라면, 100개의 요청 중 95개는 1.5초 이내에 처리되고 나머지 5개는 더 오래 걸린다는 뜻입니다.

### 꼬리 지연 시간(Tail Latency)

**꼬리 지연 시간**은 상위 백분위에서 나타나는 높은 응답 시간을 의미하며, 이는 사용자 경험에 큰 영향을 미칩니다. 예를 들어, 대부분의 요청이 빠르게 처리되더라도 일부 요청에서 지나치게 긴 응답 시간이 발생하면 사용자는 서비스가 느리다고 느낄 수 있습니다. 따라서 꼬리 지연 시간을 줄이는 것은 고품질 서비스를 제공하는 데 중요한 요소입니다.

## 효율적 확장을 위한 전략

확장성과 관련하여 단순히 자원을 추가하는 방식 외에도 효율적으로 자원을 활용하거나 최적화하는 방법도 중요합니다. 다음과 같은 전략들이 유용할 수 있습니다:

- **캐싱 전략 강화:** 자주 조회되는 데이터를 캐시에 저장하여 데이터베이스 조회 부담을 줄입니다.
- **데이터베이스 쿼리 최적화:** 쿼리 실행 계획을 개선하거나 인덱스를 추가하여 데이터베이스 성능을 향상시킵니다.
- **로드 밸런싱:** 트래픽을 여러 서버로 분산시켜 병목 현상을 방지합니다.
- **비동기 처리:** 시간이 오래 걸리는 작업은 비동기로 처리하여 주요 작업 흐름의 응답 시간을 단축합니다.

또한, 부하와 성능 간 관계를 시각적으로 표현한 그래프나 도표를 활용하면 문제를 분석하고 해결책을 설계하는 데 큰 도움이 됩니다.

위 내용을 바탕으로 확장성과 관련된 논의를 진행하면 보다 체계적이고 실질적인 접근이 가능할 것입니다.